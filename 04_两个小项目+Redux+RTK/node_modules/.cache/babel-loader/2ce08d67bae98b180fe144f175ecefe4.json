{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u524D\\u7AEF\\u5B66\\u4E60\\\\00-react\\\\00-React\\\\04_react_app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useReducer } from 'react';\nimport FilterMeals from './Components/FilterMeals/FilterMeals';\nimport Meals from './Components/Meals/Meals';\nimport CartContext from './store/cart-context';\nimport Cart from './Components/Cart/Cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MEALS_DATA = [{\n  id: '1',\n  title: '汉堡包',\n  desc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\n  price: 12,\n  img: '/img/meals/1.png'\n}, {\n  id: '2',\n  title: '双层吉士汉堡',\n  desc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\n  price: 20,\n  img: '/img/meals/2.png'\n}, {\n  id: '3',\n  title: '巨无霸',\n  desc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\n  price: 24,\n  img: '/img/meals/3.png'\n}, {\n  id: '4',\n  title: '麦辣鸡腿汉堡',\n  desc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\n  price: 21,\n  img: '/img/meals/4.png'\n}, {\n  id: '5',\n  title: '板烧鸡腿堡',\n  desc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\n  price: 22,\n  img: '/img/meals/5.png'\n}, {\n  id: '6',\n  title: '麦香鸡',\n  desc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\n  price: 14,\n  img: '/img/meals/6.png'\n}, {\n  id: '7',\n  title: '吉士汉堡包',\n  desc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\n  price: 12,\n  img: '/img/meals/7.png'\n}];\n\n// 定义cartReducer\nconst cartReducer = (state, action) => {\n  // 复制购物车\n  const newCart = {\n    ...state\n  };\n  switch (action.type) {\n    default:\n      return state;\n    case 'ADD':\n      if (newCart.items.indexOf(action.meal) === -1) {\n        newCart.items.push(action.meal);\n        action.meal.amount = 1;\n      } else {\n        action.meal.amount += 1;\n      }\n      newCart.totalAmount += 1;\n      newCart.totalPrice += action.meal.price;\n      return newCart;\n    case 'REMOVE':\n      action.meal.amount -= 1;\n      if (action.meal.amount === 0) {\n        newCart.items.splice(newCart.items.indexOf(action.meal), 1);\n      }\n      newCart.totalAmount -= 1;\n      newCart.totalPrice -= action.meal.price;\n      return newCart;\n  }\n};\nconst App = () => {\n  _s();\n  const [mealsData, setMealsData] = useState(MEALS_DATA);\n  // 之前的用useState\n  // const [cartData, setCartData] = useState({\n  //     items: [],\n  //     totalAmount: 0,\n  //     totalPrice: 0\n  // })\n\n  // 现在改写\n  const [cartData, cartDispatch] = useReducer(cartReducer, {\n    items: [],\n    totalAmount: 0,\n    totalPrice: 0\n  });\n  const filterHandler = keyword => {\n    const newMealsData = MEALS_DATA.filter(item => item.title.indexOf(keyword) !== -1);\n    setMealsData(newMealsData);\n  };\n  const clearCart = () => {\n    const newCart = {\n      ...cartData\n    };\n    console.log(newCart);\n    newCart.items.forEach(item => delete item.amount); //将购物车中商品的数量清0\n    newCart.items = [];\n    newCart.totalAmount = 0;\n    newCart.totalPrice = 0;\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      ...cartData,\n      cartDispatch\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(FilterMeals, {\n        onFilter: filterHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Meals, {\n        mealsData: mealsData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"xeDo2W0ESyS1jYrvPK6UgO4H8t0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useReducer","FilterMeals","Meals","CartContext","Cart","MEALS_DATA","id","title","desc","price","img","cartReducer","state","action","newCart","type","items","indexOf","meal","push","amount","totalAmount","totalPrice","splice","App","mealsData","setMealsData","cartData","cartDispatch","filterHandler","keyword","newMealsData","filter","item","clearCart","console","log","forEach"],"sources":["D:/前端学习/00-react/00-React/04_react_app/src/App.js"],"sourcesContent":["import React, { useState, useReducer } from 'react';\r\nimport FilterMeals from './Components/FilterMeals/FilterMeals';\r\nimport Meals from './Components/Meals/Meals';\r\nimport CartContext from './store/cart-context';\r\nimport Cart from './Components/Cart/Cart';\r\n\r\n\r\nconst MEALS_DATA = [\r\n    {\r\n        id: '1',\r\n        title: '汉堡包',\r\n        desc: '百分百纯牛肉配搭爽脆酸瓜洋葱粒与美味番茄酱经典滋味让你无法抵挡！',\r\n        price: 12,\r\n        img: '/img/meals/1.png'\r\n    },\r\n    {\r\n        id: '2',\r\n        title: '双层吉士汉堡',\r\n        desc: '百分百纯牛肉与双层香软芝，加上松软面包及美味酱料，诱惑无人能挡！',\r\n        price: 20,\r\n        img: '/img/meals/2.png'\r\n    },\r\n    {\r\n        id: '3',\r\n        title: '巨无霸',\r\n        desc: '两块百分百纯牛肉，搭配生菜、洋葱等新鲜食材，口感丰富，极致美味！',\r\n        price: 24,\r\n        img: '/img/meals/3.png'\r\n    }, {\r\n        id: '4',\r\n        title: '麦辣鸡腿汉堡',\r\n        desc: '金黄脆辣的外皮，鲜嫩幼滑的鸡腿肉，多重滋味，一次打动您挑剔的味蕾！',\r\n        price: 21,\r\n        img: '/img/meals/4.png'\r\n    }, {\r\n        id: '5',\r\n        title: '板烧鸡腿堡',\r\n        desc: '原块去骨鸡排嫩滑多汁，与翠绿新鲜的生菜和香浓烧鸡酱搭配，口感丰富！',\r\n        price: 22,\r\n        img: '/img/meals/5.png'\r\n    }, {\r\n        id: '6',\r\n        title: '麦香鸡',\r\n        desc: '清脆爽口的生菜，金黄酥脆的鸡肉。营养配搭，好滋味的健康选择！',\r\n        price: 14,\r\n        img: '/img/meals/6.png'\r\n    }, {\r\n        id: '7',\r\n        title: '吉士汉堡包',\r\n        desc: '百分百纯牛肉与香软芝士融为一体配合美味番茄醬丰富口感一咬即刻涌现！',\r\n        price: 12,\r\n        img: '/img/meals/7.png'\r\n    }\r\n];\r\n\r\n// 定义cartReducer\r\nconst cartReducer = (state, action) => {\r\n    // 复制购物车\r\n    const newCart = { ...state }\r\n    switch (action.type) {\r\n        default:\r\n            return state\r\n        case 'ADD':\r\n            if (newCart.items.indexOf(action.meal) === -1) {\r\n                newCart.items.push(action.meal)\r\n                action.meal.amount = 1\r\n            } else {\r\n                action.meal.amount += 1\r\n            }\r\n            newCart.totalAmount += 1\r\n            newCart.totalPrice += action.meal.price\r\n            return newCart\r\n        case 'REMOVE':\r\n            action.meal.amount -= 1\r\n            if (action.meal.amount === 0) {\r\n                newCart.items.splice(newCart.items.indexOf(action.meal), 1)\r\n            }\r\n            newCart.totalAmount -= 1\r\n            newCart.totalPrice -= action.meal.price\r\n            return newCart\r\n    }\r\n}\r\n\r\nconst App = () => {\r\n    const [mealsData, setMealsData] = useState(MEALS_DATA)\r\n    // 之前的用useState\r\n    // const [cartData, setCartData] = useState({\r\n    //     items: [],\r\n    //     totalAmount: 0,\r\n    //     totalPrice: 0\r\n    // })\r\n\r\n    // 现在改写\r\n    const [cartData, cartDispatch] = useReducer(cartReducer, {\r\n        items: [],\r\n        totalAmount: 0,\r\n        totalPrice: 0\r\n    })\r\n\r\n    const filterHandler = (keyword) => {\r\n        const newMealsData = MEALS_DATA.filter(item => item.title.indexOf(keyword) !== -1)\r\n        setMealsData(newMealsData)\r\n    }\r\n\r\n\r\n    const clearCart = () => {\r\n        const newCart = { ...cartData }\r\n        console.log(newCart);\r\n        newCart.items.forEach(item => delete item.amount) //将购物车中商品的数量清0\r\n        newCart.items = []\r\n        newCart.totalAmount = 0\r\n        newCart.totalPrice = 0\r\n    }\r\n    return (\r\n        <CartContext.Provider value={{ ...cartData, cartDispatch}}>\r\n            <div>\r\n                <FilterMeals onFilter={filterHandler}></FilterMeals>\r\n                <Meals mealsData={mealsData} />\r\n                <Cart></Cart>\r\n            </div>\r\n        </CartContext.Provider>\r\n\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}